{"ast":null,"code":"import _classCallCheck from \"D:\\\\Github\\\\Miladsoft\\\\blockcore-hub-1\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"D:\\\\Github\\\\Miladsoft\\\\blockcore-hub-1\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport _regeneratorRuntime from \"D:\\\\Github\\\\Miladsoft\\\\blockcore-hub-1\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\n\n/* eslint-disable */\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar _a, _b, _c, _d, _e;\n\nimport { Component, ViewEncapsulation, HostBinding, ChangeDetectorRef } from '@angular/core';\nimport { GlobalService } from '../../services/global.service';\nimport { ApiService } from '../../services/api.service';\nimport { MatDialog } from '@angular/material/dialog';\nimport { WalletService } from '../../services/wallet.service';\nimport { Router } from '@angular/router';\nimport { ChainService } from 'src/app/services/chain.service';\nimport { ApplicationStateService } from 'src/app/services/application-state.service';\nimport { HubAddComponent } from './hub-add.component';\nimport { SettingsService } from 'src/app/services/settings.service';\nimport { HubService } from 'src/app/services/hub.service';\nimport { IdentityService } from 'src/app/services/identity.service';\n\nvar HubDetailsComponent = /*#__PURE__*/function () {\n  function HubDetailsComponent(globalService, apiService, cd, appState, chains, settings, hubService, identityService, router, dialog, walletService) {\n    _classCallCheck(this, HubDetailsComponent);\n\n    this.globalService = globalService;\n    this.apiService = apiService;\n    this.cd = cd;\n    this.appState = appState;\n    this.chains = chains;\n    this.settings = settings;\n    this.hubService = hubService;\n    this.identityService = identityService;\n    this.router = router;\n    this.dialog = dialog;\n    this.walletService = walletService;\n    this.hostClass = true;\n    this.columns = 4;\n    this.gridByBreakpoint = {\n      xl: 8,\n      lg: 6,\n      md: 4,\n      sm: 2,\n      xs: 1\n    };\n    this.chain = this.chains.getChain(this.appState.daemon.network);\n  }\n\n  _createClass(HubDetailsComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this = this;\n\n      // Check if the hubs are online every 60 seconds.\n      setInterval(function () {\n        // eslint-disable-next-line @typescript-eslint/prefer-for-of\n        for (var i = 0; i < _this.hubService.hubs.length; i++) {\n          _this.hubService.add(_this.hubService.hubs[i].originalUrl);\n        }\n      }, 60000);\n    }\n  }, {\n    key: \"ngOnDestroy\",\n    value: function ngOnDestroy() {// this.subscription.unsubscribe();\n    }\n  }, {\n    key: \"addHub\",\n    value: function addHub() {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var dialogRef;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                dialogRef = this.dialog.open(HubAddComponent, {\n                  width: '300px',\n                  data: {\n                    url: ''\n                  }\n                });\n                dialogRef.afterClosed().subscribe(function (result) {\n                  console.log('The dialog was closed', result);\n\n                  if (result) {\n                    console.log('RESULT:', result);\n\n                    _this2.hubService.add(result).then(function (data) {\n                      // Update the local list of hubs with the one persisted in settings.\n                      // this.hubService.hubs = this.settings.hubs;\n                      _this2.cd.markForCheck();\n                    });\n                  }\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    }\n  }, {\n    key: \"removeHub\",\n    value: function removeHub(id) {\n      console.log('Trying to remove:' + id);\n      this.hubService.remove(id); // this.hubs = this.settings.hubs;\n\n      this.cd.markForCheck();\n    }\n  }, {\n    key: \"back\",\n    value: function back() {\n      this.router.navigateByUrl('/settings');\n    }\n  }]);\n\n  return HubDetailsComponent;\n}();\n\n__decorate([HostBinding('class.network'), __metadata(\"design:type\", Object)], HubDetailsComponent.prototype, \"hostClass\", void 0);\n\nHubDetailsComponent = __decorate([Component({\n  selector: 'app-hub-details',\n  templateUrl: './hub-details.component.html',\n  styleUrls: ['./hub-details.component.scss'],\n  encapsulation: ViewEncapsulation.None\n}), __metadata(\"design:paramtypes\", [GlobalService, ApiService, ChangeDetectorRef, typeof (_a = typeof ApplicationStateService !== \"undefined\" && ApplicationStateService) === \"function\" ? _a : Object, typeof (_b = typeof ChainService !== \"undefined\" && ChainService) === \"function\" ? _b : Object, typeof (_c = typeof SettingsService !== \"undefined\" && SettingsService) === \"function\" ? _c : Object, typeof (_d = typeof HubService !== \"undefined\" && HubService) === \"function\" ? _d : Object, typeof (_e = typeof IdentityService !== \"undefined\" && IdentityService) === \"function\" ? _e : Object, Router, MatDialog, WalletService])], HubDetailsComponent);\nexport { HubDetailsComponent };","map":null,"metadata":{},"sourceType":"module"}