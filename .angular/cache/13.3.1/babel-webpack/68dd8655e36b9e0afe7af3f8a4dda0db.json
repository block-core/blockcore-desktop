{"ast":null,"code":"import _classCallCheck from \"D:\\\\Github\\\\Miladsoft\\\\blockcore-hub-1\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"D:\\\\Github\\\\Miladsoft\\\\blockcore-hub-1\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { AuthenticationService } from '../../../services/authentication.service';\nimport { Router } from '@angular/router';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { PasswordValidationDirective } from '../../../shared/directives/password-validation.directive';\nimport { WalletRecovery } from '../../../classes/wallet-recovery';\nimport { ApiService } from '../../../services/api.service';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { ApplicationStateService } from '../../../services/application-state.service';\nimport { DatePipe } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../services/authentication.service\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../services/application-state.service\";\nimport * as i5 from \"../../../services/api.service\";\nimport * as i6 from \"@angular/common\";\n\nfunction RecoverAccountComponent_mat_error_89_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \"\\n                        Passwords must match.\\n                    \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction RecoverAccountComponent_div_119_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelement(2, \"mat-spinner\", 19);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"diameter\", 24);\n  }\n}\n\nexport var RecoverAccountComponent = /*#__PURE__*/(function () {\n  var RecoverAccountComponent = /*#__PURE__*/function () {\n    function RecoverAccountComponent(authService, snackBar, router, appState, apiService, datePipe) {\n      _classCallCheck(this, RecoverAccountComponent);\n\n      this.authService = authService;\n      this.snackBar = snackBar;\n      this.router = router;\n      this.appState = appState;\n      this.apiService = apiService;\n      this.datePipe = datePipe;\n      this.hostClass = true;\n      this.seedExtension = '';\n      this.password1 = '';\n      this.password2 = '';\n      this.accountName = 'main';\n      this.form = new FormGroup({\n        accountPassword: new FormControl('', {\n          updateOn: 'blur'\n        }),\n        seedExtension: new FormControl('', {\n          updateOn: 'blur'\n        }),\n        accountMnemonic: new FormControl('', Validators.required),\n        accountDate: new FormControl('', Validators.required),\n        accountPasswordConfirmation: new FormControl('', {\n          updateOn: 'blur'\n        }),\n        accountName: new FormControl('', Validators.compose([Validators.required, Validators.minLength(1), Validators.maxLength(24), Validators.pattern(/^[a-zA-Z0-9]*$/)]))\n      }, PasswordValidationDirective.MatchPassword);\n      this.minDate = this.apiService.genesisDate;\n      this.maxDate = new Date(); // Set to current date.\n\n      this.accountName = 'main';\n    }\n\n    _createClass(RecoverAccountComponent, [{\n      key: \"restoreAccount\",\n      value: function restoreAccount() {\n        this.saving = true;\n        var recoveryDate = new Date(this.form.get('accountDate').value);\n        recoveryDate.setDate(recoveryDate.getDate() - 1);\n        this.walletRecovery = new WalletRecovery(this.accountName, this.mnemonic, this.password1, this.seedExtension, recoveryDate);\n        this.recoverWallet(this.walletRecovery);\n      }\n    }, {\n      key: \"recoverWallet\",\n      value: function recoverWallet(_recoverWallet) {\n        var _this = this;\n\n        this.apiService.recoverWallet(_recoverWallet).subscribe(function (response) {\n          _this.snackBar.open('Your wallet has been recovered.', null, {\n            duration: 3000\n          });\n\n          localStorage.setItem('Network:Wallet', _recoverWallet.name);\n\n          _this.router.navigateByUrl('/login');\n        }, function (error) {\n          _this.saving = false;\n\n          _this.apiService.handleException(error);\n        });\n      }\n    }]);\n\n    return RecoverAccountComponent;\n  }();\n\n  /** @nocollapse */\n  RecoverAccountComponent.ɵfac = function RecoverAccountComponent_Factory(t) {\n    return new (t || RecoverAccountComponent)(i0.ɵɵdirectiveInject(i1.AuthenticationService), i0.ɵɵdirectiveInject(i2.MatSnackBar), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ApplicationStateService), i0.ɵɵdirectiveInject(i5.ApiService), i0.ɵɵdirectiveInject(i6.DatePipe));\n  };\n  /** @nocollapse */\n\n\n  RecoverAccountComponent.ɵcmp =\n  /** @pureOrBreakMyCode */\n  i0.ɵɵdefineComponent({\n    type: RecoverAccountComponent,\n    selectors: [[\"app-account-recover\"]],\n    hostVars: 2,\n    hostBindings: function RecoverAccountComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"account-recover\", ctx.hostClass);\n      }\n    },\n    decls: 123,\n    vars: 22,\n    consts: [[1, \"content\"], [1, \"mat-h1\"], [3, \"formGroup\"], [1, \"mat-h2\"], [\"matInput\", \"\", \"formControlName\", \"accountDate\", \"placeholder\", \"Choose a date\", 3, \"min\", \"max\", \"ngModel\", \"matDatepicker\", \"ngModelChange\"], [\"matSuffix\", \"\", 3, \"for\"], [\"picker\", \"\"], [1, \"input-full-width\"], [\"matInput\", \"\", \"formControlName\", \"accountMnemonic\", \"id\", \"accountMnemonic\", \"placeholder\", \"Fill out recovery phrase\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"formControlName\", \"seedExtension\", \"id\", \"seedExtension\", \"placeholder\", \"Enter your extension word (can be empty)\", 3, \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"type\", \"password\", \"placeholder\", \"Enter your password\", \"name\", \"accountPassword\", \"formControlName\", \"accountPassword\", \"autocomplete\", \"new-password\", 3, \"formGroup\", \"ngModel\", \"ngModelChange\"], [\"matInput\", \"\", \"type\", \"password\", \"placeholder\", \"Enter your password again\", \"name\", \"accountPasswordConfirmation\", \"formControlName\", \"accountPasswordConfirmation\", \"autocomplete\", \"new-password\", 3, \"formGroup\", \"ngModel\", \"ngModelChange\"], [4, \"ngIf\"], [\"appearance\", \"outline\"], [\"matInput\", \"\", \"formControlName\", \"accountName\", \"name\", \"accountName\", \"placeholder\", \"Fill out account name\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", \"color\", \"primary\", \"mat-raised-button\", \"\", 3, \"disabled\", \"click\"], [\"mat-raised-button\", \"\", \"routerLink\", \"/login\", \"type\", \"button\"], [\"class\", \"spinner-container\", 4, \"ngIf\"], [1, \"spinner-container\"], [3, \"diameter\"]],\n    template: function RecoverAccountComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtext(1, \"\\n    \");\n        i0.ɵɵelementStart(2, \"h1\", 1);\n        i0.ɵɵtext(3, \"Restore account\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(4, \"\\n\\n    \");\n        i0.ɵɵelementStart(5, \"form\", 2);\n        i0.ɵɵtext(6, \"\\n\\n        \");\n        i0.ɵɵelementStart(7, \"p\");\n        i0.ɵɵtext(8, \"If you already have an account, you can restore it here. You need your 12-word \");\n        i0.ɵɵelementStart(9, \"strong\");\n        i0.ɵɵtext(10, \"recovery phrase\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(11, \" that was given to your when\\n            you first created your account, and approximately the date you created your account.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(12, \"\\n        \");\n        i0.ɵɵelement(13, \"br\");\n        i0.ɵɵtext(14, \"\\n\\n        \");\n        i0.ɵɵelementStart(15, \"mat-card\");\n        i0.ɵɵtext(16, \"\\n            \");\n        i0.ɵɵelementStart(17, \"h2\", 3);\n        i0.ɵɵtext(18, \"\\n                What is the earliest possible date your created your account?\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(19, \"\\n\\n            \");\n        i0.ɵɵelementStart(20, \"p\");\n        i0.ɵɵtext(21, \"\\n                \");\n        i0.ɵɵelementStart(22, \"mat-form-field\");\n        i0.ɵɵtext(23, \"\\n                    \");\n        i0.ɵɵelementStart(24, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function RecoverAccountComponent_Template_input_ngModelChange_24_listener($event) {\n          return ctx.accountDate = $event;\n        });\n        i0.ɵɵpipe(25, \"date\");\n        i0.ɵɵpipe(26, \"date\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(27, \"\\n                    \");\n        i0.ɵɵelement(28, \"mat-datepicker-toggle\", 5);\n        i0.ɵɵtext(29, \"\\n                    \");\n        i0.ɵɵelement(30, \"mat-datepicker\", null, 6);\n        i0.ɵɵtext(32, \"\\n                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(33, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(34, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(35, \"\\n\\n        \");\n        i0.ɵɵelementStart(36, \"mat-card\");\n        i0.ɵɵtext(37, \"\\n\\n            \");\n        i0.ɵɵelementStart(38, \"h2\", 3);\n        i0.ɵɵtext(39, \"What is your 12-word \");\n        i0.ɵɵelementStart(40, \"strong\");\n        i0.ɵɵtext(41, \"recovery phrase\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(42, \" you saw when you created your account?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(43, \"\\n\\n            \");\n        i0.ɵɵelementStart(44, \"p\");\n        i0.ɵɵtext(45, \"\\n                \");\n        i0.ɵɵelementStart(46, \"mat-form-field\", 7);\n        i0.ɵɵtext(47, \"\\n                    \");\n        i0.ɵɵelementStart(48, \"textarea\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function RecoverAccountComponent_Template_textarea_ngModelChange_48_listener($event) {\n          return ctx.mnemonic = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(49, \"\\n                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(50, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(51, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(52, \"\\n\\n        \");\n        i0.ɵɵelementStart(53, \"mat-card\");\n        i0.ɵɵtext(54, \"\\n\\n            \");\n        i0.ɵɵelementStart(55, \"h2\", 3);\n        i0.ɵɵtext(56, \"What is your personal extension word, if any, you used when you created your account?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(57, \"\\n\\n            \");\n        i0.ɵɵelementStart(58, \"p\");\n        i0.ɵɵtext(59, \"\\n                \");\n        i0.ɵɵelementStart(60, \"mat-form-field\", 7);\n        i0.ɵɵtext(61, \"\\n                    \");\n        i0.ɵɵelementStart(62, \"textarea\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function RecoverAccountComponent_Template_textarea_ngModelChange_62_listener($event) {\n          return ctx.seedExtension = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(63, \"\\n                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(64, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(65, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(66, \"\\n\\n        \");\n        i0.ɵɵelementStart(67, \"mat-card\");\n        i0.ɵɵtext(68, \"\\n            \");\n        i0.ɵɵelementStart(69, \"h2\", 3);\n        i0.ɵɵtext(70, \"What is the password for your account?\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(71, \"\\n\\n            \");\n        i0.ɵɵelementStart(72, \"p\");\n        i0.ɵɵtext(73, \"Provide a password that we can use to protect your wallet when it is saved. You can choose something other than what you had before.\\n                You will be prompted to enter this passord every time your start Blockcore Hub.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(74, \"\\n            \");\n        i0.ɵɵelementStart(75, \"p\");\n        i0.ɵɵtext(76, \"\\n                \");\n        i0.ɵɵelementStart(77, \"mat-form-field\", 7);\n        i0.ɵɵtext(78, \"\\n                    \");\n        i0.ɵɵelementStart(79, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function RecoverAccountComponent_Template_input_ngModelChange_79_listener($event) {\n          return ctx.password1 = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(80, \"\\n                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(81, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(82, \"\\n            \");\n        i0.ɵɵelementStart(83, \"p\");\n        i0.ɵɵtext(84, \"\\n                \");\n        i0.ɵɵelementStart(85, \"mat-form-field\", 7);\n        i0.ɵɵtext(86, \"\\n                    \");\n        i0.ɵɵelementStart(87, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function RecoverAccountComponent_Template_input_ngModelChange_87_listener($event) {\n          return ctx.password2 = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(88, \"\\n                    \");\n        i0.ɵɵtemplate(89, RecoverAccountComponent_mat_error_89_Template, 2, 0, \"mat-error\", 12);\n        i0.ɵɵtext(90, \"\\n                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(91, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(92, \"\\n\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(93, \"\\n\\n        \");\n        i0.ɵɵelementStart(94, \"mat-card\");\n        i0.ɵɵtext(95, \"\\n            \");\n        i0.ɵɵelementStart(96, \"h2\", 3);\n        i0.ɵɵtext(97, \"\\n                What do you want to name your account?\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(98, \"\\n            \");\n        i0.ɵɵelementStart(99, \"p\");\n        i0.ɵɵtext(100, \"\\n                \");\n        i0.ɵɵelementStart(101, \"mat-form-field\", 13);\n        i0.ɵɵtext(102, \"\\n                    \");\n        i0.ɵɵelementStart(103, \"mat-label\");\n        i0.ɵɵtext(104, \"Account name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(105, \"\\n                    \");\n        i0.ɵɵelementStart(106, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function RecoverAccountComponent_Template_input_ngModelChange_106_listener($event) {\n          return ctx.accountName = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(107, \"\\n                    \");\n        i0.ɵɵtext(108, \"\\n                    \");\n        i0.ɵɵtext(109, \"\\n                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(110, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(111, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(112, \"\\n\\n        \");\n        i0.ɵɵelementStart(113, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function RecoverAccountComponent_Template_button_click_113_listener() {\n          return ctx.restoreAccount();\n        });\n        i0.ɵɵtext(114, \"Restore account\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(115, \"\\n        \");\n        i0.ɵɵelementStart(116, \"button\", 16);\n        i0.ɵɵtext(117, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(118, \"\\n        \");\n        i0.ɵɵtemplate(119, RecoverAccountComponent_div_119_Template, 4, 1, \"div\", 17);\n        i0.ɵɵtext(120, \"\\n\\n    \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(121, \"\\n\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(122, \"\\n\");\n      }\n\n      if (rf & 2) {\n        var _r0 = i0.ɵɵreference(31);\n\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"min\", i0.ɵɵpipeBind2(25, 16, ctx.minDate, \"yyyy-MM-dd\"))(\"max\", i0.ɵɵpipeBind2(26, 19, ctx.maxDate, \"yyyy-MM-dd\"))(\"ngModel\", ctx.accountDate)(\"matDatepicker\", _r0);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"for\", _r0);\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"ngModel\", ctx.mnemonic);\n        i0.ɵɵadvance(14);\n        i0.ɵɵproperty(\"ngModel\", ctx.seedExtension);\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"formGroup\", ctx.form)(\"ngModel\", ctx.password1);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formGroup\", ctx.form)(\"ngModel\", ctx.password2);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.form.get(\"accountPasswordConfirmation\").hasError(\"accountPasswordConfirmation\"));\n        i0.ɵɵadvance(17);\n        i0.ɵɵproperty(\"ngModel\", ctx.accountName);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"disabled\", ctx.saving || ctx.form.invalid);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.saving);\n      }\n    },\n    styles: [\".account-recover mat-card {\\n  margin-bottom: 20px;\\n}\\n.account-recover button {\\n  margin-right: 6px;\\n}\\n.account-recover .spinner-container {\\n  vertical-align: middle;\\n  display: inline-block;\\n}\"],\n    encapsulation: 2\n  });\n  return RecoverAccountComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}