{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/api.service\";\nimport * as i2 from \"../../services/global.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../services/application-state.service\";\nimport * as i5 from \"../../services/details.service\";\nimport * as i6 from \"../../services/wallet.service\";\nimport * as i7 from \"../../shared/app-modes\";\nimport * as i8 from \"@angular/material/dialog\";\nimport * as i9 from \"@angular/forms\";\nimport * as i10 from \"@angular/material/tabs\";\nimport * as i11 from \"@angular/material/icon\";\nimport * as i12 from \"../../shared/grid/grid-container/grid-container.component\";\nimport * as i13 from \"../../shared/grid/grid-cell/grid-cell.directive\";\nimport * as i14 from \"@angular/material/card\";\nimport * as i15 from \"@angular/material/form-field\";\nimport * as i16 from \"@angular/material/input\";\nimport * as i17 from \"@angular/common\";\nimport * as i18 from \"@angular/material/button\";\n\nfunction SigningComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 21);\n    i0.ɵɵtext(1, \"create\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \" Sign Message \");\n  }\n}\n\nfunction SigningComponent_mat_form_field_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-form-field\", 8)(1, \"mat-label\");\n    i0.ɵɵtext(2, \"Signature\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"textarea\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", ctx_r2.signature);\n  }\n}\n\nfunction SigningComponent_ng_template_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 21);\n    i0.ɵɵtext(1, \"fingerprint\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(2, \"\\u00A0 Verify Message \");\n  }\n}\n\nfunction SigningComponent_mat_card_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\")(1, \"mat-card-header\")(2, \"mat-card-title\");\n    i0.ɵɵtext(3, \"Signature verified\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-subtitle\");\n    i0.ɵɵtext(5, \"This means that the message has been verified to be signed by the owner of the address/identity specified. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"mat-card-content\")(7, \"mat-icon\", 23);\n    i0.ɵɵtext(8, \"verified\");\n    i0.ɵɵelementEnd()()();\n  }\n}\n\nfunction SigningComponent_mat_card_61_mat_icon_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 25);\n    i0.ɵɵtext(1, \"report\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SigningComponent_mat_card_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\")(1, \"mat-card-header\")(2, \"mat-card-title\");\n    i0.ɵɵtext(3, \"Failed signature verification\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-card-subtitle\");\n    i0.ɵɵtext(5, \"This means that the message was not signed by the owner of the address/identity specified. \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"mat-card-content\");\n    i0.ɵɵtemplate(7, SigningComponent_mat_card_61_mat_icon_7_Template, 2, 0, \"mat-icon\", 24);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.validSignature === false);\n  }\n}\n\nexport class SigningComponent {\n  apiService;\n  globalService;\n  router;\n  appState;\n  detailsService;\n  wallet;\n  appModes;\n  dialog;\n  fb;\n  ref;\n  hostClass = true;\n  signingForm;\n  verifyForm;\n  signature;\n  validSignature = null;\n\n  constructor(apiService, globalService, router, appState, detailsService, wallet, appModes, dialog, fb, ref) {\n    this.apiService = apiService;\n    this.globalService = globalService;\n    this.router = router;\n    this.appState = appState;\n    this.detailsService = detailsService;\n    this.wallet = wallet;\n    this.appModes = appModes;\n    this.dialog = dialog;\n    this.fb = fb;\n    this.ref = ref;\n    this.buildsForms();\n    this.appState.pageMode = false;\n  }\n\n  buildsForms() {\n    this.signingForm = this.fb.group({\n      signingAddress: ['', Validators.required],\n      signingPassword: ['', Validators.required],\n      signingMessage: ['']\n    });\n    this.verifyForm = this.fb.group({\n      verifyAddress: ['', Validators.required],\n      verifyMessage: [''],\n      verifySignature: ['', Validators.required]\n    });\n  }\n\n  ngOnInit() {}\n\n  sign() {\n    const address = this.signingForm.get('signingAddress').value;\n    const message = this.signingForm.get('signingMessage').value;\n    const password = this.signingForm.get('signingPassword').value;\n    this.signature = null;\n    this.apiService.signMessage(this.wallet.walletName, password, 'account 0', address, message).subscribe(response => {\n      console.log(response);\n      this.signature = response.signature;\n    });\n    this.signingForm.get('signingPassword').reset();\n  }\n\n  verify() {\n    const address = this.verifyForm.get('verifyAddress').value;\n    const message = this.verifyForm.get('verifyMessage').value;\n    const signature = this.verifyForm.get('verifySignature').value;\n    this.apiService.verifyMessage(address, message, signature).subscribe(response => {\n      this.validSignature = response == 'True';\n    });\n  }\n\n  clear(form) {\n    form.resetForm();\n  }\n\n  static ɵfac = function SigningComponent_Factory(t) {\n    return new (t || SigningComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.GlobalService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ApplicationStateService), i0.ɵɵdirectiveInject(i5.DetailsService), i0.ɵɵdirectiveInject(i6.WalletService), i0.ɵɵdirectiveInject(i7.AppModes), i0.ɵɵdirectiveInject(i8.MatDialog), i0.ɵɵdirectiveInject(i9.FormBuilder), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n  };\n  static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SigningComponent,\n    selectors: [[\"app-signing\"]],\n    hostVars: 2,\n    hostBindings: function SigningComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"wallet\", ctx.hostClass);\n      }\n    },\n    decls: 71,\n    vars: 7,\n    consts: [[\"color\", \"primary\", \"backgroundColor\", \"accent\"], [\"mat-tab-label\", \"\"], [1, \"content\"], [\"app-grid-cell\", \"\", 1, \"card\", \"card-body\"], [1, \"grid-card\"], [1, \"center-align\"], [1, \"signing-form\", 3, \"formGroup\", \"ngSubmit\"], [\"signForm\", \"ngForm\"], [\"appearance\", \"outline\", 1, \"signing-form-field\"], [\"matInput\", \"\", \"type\", \"text\", \"id\", \"inputAddress\", \"formControlName\", \"signingAddress\", \"placeholder\", \"Fill out address/identity\"], [\"matInput\", \"\", \"id\", \"inputMessage\", \"rows\", \"10\", \"formControlName\", \"signingMessage\", \"placeholder\", \"Fill out a message\"], [\"matInput\", \"\", \"type\", \"password\", \"id\", \"inputPassword\", \"formControlName\", \"signingPassword\", \"placeholder\", \"Fill out your wallet password\"], [\"class\", \"signing-form-field\", \"appearance\", \"outline\", 4, \"ngIf\"], [\"type\", \"button\", \"color\", \"primary\", \"mat-flat-button\", \"\", \"id\", \"flipcard\", 3, \"disabled\", \"click\"], [\"type\", \"button\", \"mat-flat-button\", \"\", \"id\", \"flipcard\", 3, \"click\"], [1, \"mat-caption\", \"signing-info\"], [\"verForm\", \"ngForm\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"verifyAddress\", \"placeholder\", \"Fill out address/identity\"], [\"matInput\", \"\", \"rows\", \"10\", \"formControlName\", \"verifyMessage\", \"placeholder\", \"Fill out a message\"], [\"matInput\", \"\", \"type\", \"text\", \"formControlName\", \"verifySignature\", \"placeholder\", \"Fill out signature\"], [4, \"ngIf\"], [1, \"tab-icon\"], [\"matInput\", \"\", \"id\", \"inputMessage\", \"rows\", \"4\", 3, \"value\"], [1, \"verified\"], [\"class\", \"failed\", 4, \"ngIf\"], [1, \"failed\"]],\n    template: function SigningComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r8 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"mat-tab-group\", 0)(1, \"mat-tab\");\n        i0.ɵɵtemplate(2, SigningComponent_ng_template_2_Template, 3, 0, \"ng-template\", 1);\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"app-grid-container\")(5, \"div\", 3)(6, \"mat-card\", 4)(7, \"mat-card-content\", 5)(8, \"form\", 6, 7);\n        i0.ɵɵlistener(\"ngSubmit\", function SigningComponent_Template_form_ngSubmit_8_listener() {\n          return ctx.sign();\n        });\n        i0.ɵɵelementStart(10, \"div\")(11, \"mat-form-field\", 8)(12, \"mat-label\");\n        i0.ɵɵtext(13, \"Signature address/identity\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"input\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"br\");\n        i0.ɵɵelementStart(16, \"mat-form-field\", 8)(17, \"mat-label\");\n        i0.ɵɵtext(18, \"Message\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"textarea\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(20, \"br\");\n        i0.ɵɵelementStart(21, \"mat-form-field\", 8)(22, \"mat-label\");\n        i0.ɵɵtext(23, \"Wallet Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"input\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"br\");\n        i0.ɵɵtemplate(26, SigningComponent_mat_form_field_26_Template, 4, 1, \"mat-form-field\", 12);\n        i0.ɵɵelementStart(27, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function SigningComponent_Template_button_click_27_listener() {\n          return ctx.sign();\n        });\n        i0.ɵɵtext(28, \"Sign\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(29, \"\\u00A0 \");\n        i0.ɵɵelementStart(30, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function SigningComponent_Template_button_click_30_listener() {\n          i0.ɵɵrestoreView(_r8);\n\n          const _r1 = i0.ɵɵreference(9);\n\n          return ctx.clear(_r1);\n        });\n        i0.ɵɵtext(31, \"Clear All\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(32, \"div\", 3)(33, \"div\", 15);\n        i0.ɵɵtext(34, \" You can sign messages/agreements with your addresses/identities to prove you can receive funding to them, or that you own the identity. Be careful not to sign anything vague or random, as phishing attacks may trick you into signing your identity over to them. Only sign fully-detailed statements you agree to. \");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(35, \"mat-tab\");\n        i0.ɵɵtemplate(36, SigningComponent_ng_template_36_Template, 3, 0, \"ng-template\", 1);\n        i0.ɵɵelementStart(37, \"div\", 2)(38, \"app-grid-container\")(39, \"div\", 3)(40, \"mat-card\", 4)(41, \"mat-card-content\", 5)(42, \"form\", 6, 16);\n        i0.ɵɵlistener(\"ngSubmit\", function SigningComponent_Template_form_ngSubmit_42_listener() {\n          return ctx.sign();\n        });\n        i0.ɵɵelementStart(44, \"div\")(45, \"mat-form-field\", 8)(46, \"mat-label\");\n        i0.ɵɵtext(47, \"Signature address/identity\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(48, \"input\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(49, \"br\");\n        i0.ɵɵelementStart(50, \"mat-form-field\", 8)(51, \"mat-label\");\n        i0.ɵɵtext(52, \"Message\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(53, \"textarea\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(54, \"br\");\n        i0.ɵɵelementStart(55, \"mat-form-field\", 8)(56, \"mat-label\");\n        i0.ɵɵtext(57, \"Signature\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(58, \"input\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(59, \"br\");\n        i0.ɵɵtemplate(60, SigningComponent_mat_card_60_Template, 9, 0, \"mat-card\", 20);\n        i0.ɵɵtemplate(61, SigningComponent_mat_card_61_Template, 8, 1, \"mat-card\", 20);\n        i0.ɵɵelement(62, \"br\");\n        i0.ɵɵelementStart(63, \"button\", 13);\n        i0.ɵɵlistener(\"click\", function SigningComponent_Template_button_click_63_listener() {\n          return ctx.verify();\n        });\n        i0.ɵɵtext(64, \"Verify Message\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(65, \"\\u00A0 \");\n        i0.ɵɵelementStart(66, \"button\", 14);\n        i0.ɵɵlistener(\"click\", function SigningComponent_Template_button_click_66_listener() {\n          i0.ɵɵrestoreView(_r8);\n\n          const _r4 = i0.ɵɵreference(43);\n\n          return ctx.clear(_r4);\n        });\n        i0.ɵɵtext(67, \"Clear All\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelementStart(68, \"div\", 3)(69, \"div\", 15);\n        i0.ɵɵtext(70, \" Enter the receiver's address/identity, message (ensure you copy exact content) and signature below to verify the message. Be careful not to read more into the signature than what is in the signed message itself, to avoid being tricked by a man-in-the-middle attack. Note that this only provies the signing party receives with the address/identity, it cannot prove sendership of any transaction. \");\n        i0.ɵɵelementEnd()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formGroup\", ctx.signingForm);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngIf\", ctx.signature);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", !ctx.signingForm.valid);\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"formGroup\", ctx.verifyForm);\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngIf\", ctx.validSignature === true);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.validSignature === false);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", !ctx.verifyForm.valid);\n      }\n    },\n    directives: [i10.MatTabGroup, i10.MatTab, i10.MatTabLabel, i11.MatIcon, i12.GridContainerComponent, i13.GridCellDirective, i14.MatCard, i14.MatCardContent, i9.ɵNgNoValidate, i9.NgControlStatusGroup, i9.FormGroupDirective, i15.MatFormField, i15.MatLabel, i16.MatInput, i9.DefaultValueAccessor, i9.NgControlStatus, i9.FormControlName, i17.NgIf, i18.MatButton, i14.MatCardHeader, i14.MatCardTitle, i14.MatCardSubtitle],\n    styles: [\".signing-info {\\n  margin: 1em;\\n  padding: 1em !important;\\n}\\n\\n.signing-form {\\n  min-width: 150px;\\n  max-width: 500px;\\n  width: 100%;\\n}\\n\\n.signing-form-field {\\n  width: 100%;\\n}\\n\\n.verified {\\n  font-size: 36px !important;\\n  color: green;\\n}\\n\\n.failed {\\n  font-size: 36px !important;\\n  color: red;\\n}\\n\\n.wallet div[fxLayoutAlign] {\\n  padding: 10px;\\n  padding-left: 25px;\\n  padding-top: 15px;\\n}\\n\\n.wallet .dashboard-card {\\n  min-height: 150px;\\n}\\n\\n.wallet .mat-card {\\n  margin-bottom: 20px;\\n}\\n\\n.wallet mat-card {\\n  margin-bottom: 20px;\\n}\\n\\n.wallet .dashboard-split-card {\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n.wallet .dashboard-split-left {\\n  flex-grow: 2;\\n  min-width: 230px;\\n  width: 65%;\\n}\\n\\n.wallet .dashboard-split-right {\\n  padding-left: 20px;\\n  flex-grow: 1;\\n  width: 35%;\\n  align-self: center;\\n}\\n\\n@media screen and (max-width: 599px) {\\n  .wallet .dashboard-split-card {\\n    flex-direction: column;\\n  }\\n  .wallet .dashboard-split-left {\\n    flex-grow: 2;\\n    width: 100%;\\n  }\\n  .wallet .dashboard-split-right {\\n    flex-grow: 1;\\n    width: 100%;\\n    align-self: center;\\n  }\\n}\\n\\n.wallet .break-everything {\\n  clear: both;\\n}\\n\\n.wallet .link {\\n  cursor: pointer;\\n}\\n\\n.wallet .wallet-no-transactions {\\n  text-align: center;\\n  margin-top: 20px;\\n}\\n\\n.wallet .wallet-transactions-table {\\n  width: 100%;\\n}\\n\\n.wallet .wallet-transactions-table .unconfirmed {\\n  font-style: italic;\\n  color: rgba(192, 192, 192, 0.75);\\n}\\n\\n.wallet .wallet-transactions-table .wallet-confirmed-icon {\\n  font-size: 14px;\\n}\\n\\n.wallet .wallet-transactions-table .wallet-split-card {\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n.wallet .wallet-transactions-table .wallet-split-left {\\n  flex-grow: 2;\\n  min-width: 230px;\\n  width: 65%;\\n}\\n\\n.wallet .wallet-transactions-table .wallet-split-right {\\n  padding-left: 20px;\\n  flex-grow: 1;\\n  width: 35%;\\n  align-self: center;\\n}\\n\\n.wallet .wallet-transactions-table .wallet-info-icon {\\n  float: right;\\n  cursor: default;\\n}\\n\\n@media screen and (max-width: 599px) {\\n  .wallet .wallet-transactions-table .wallet-split-card {\\n    flex-direction: column;\\n  }\\n  .wallet .wallet-transactions-table .wallet-split-left {\\n    flex-grow: 2;\\n    width: 100%;\\n  }\\n  .wallet .wallet-transactions-table .wallet-split-right {\\n    flex-grow: 1;\\n    width: 100%;\\n    align-self: center;\\n  }\\n}\\n\\n.wallet .dashboard .history {\\n  width: 80%;\\n}\\n\\n.wallet .dashboard .history .history-table {\\n  width: 100%;\\n}\\n\\n.wallet .dashboard div[fxLayoutAlign] {\\n  padding: 10px;\\n  padding-left: 25px;\\n  padding-top: 15px;\\n}\\n\\n.wallet .dashboard .dashboard-card {\\n  min-height: 150px;\\n}\\n\\n.wallet .dashboard .mat-grid-tile .mat-figure {\\n  align-items: flex-start;\\n}\\n\\n.wallet .dashboard .dashboard-coinmap {\\n  min-height: 200px;\\n}\\n\\n.wallet .dashboard .dashboard-info-icon {\\n  float: right;\\n  cursor: default;\\n}\\n\\n.wallet .dashboard .transaction-details-button {\\n  height: 10px;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.wallet .dashboard .transaction-details-button .mat-icon {\\n  font-size: 10px;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.wallet .dashboard .link {\\n  cursor: pointer;\\n}\\n\\n.wallet .dashboard mat-card {\\n  margin-bottom: 20px;\\n}\\n\\n.wallet .dashboard .dashboard-split-card {\\n  display: flex;\\n  flex-direction: row;\\n}\\n\\n.wallet .dashboard .dashboard-split-left {\\n  flex-grow: 2;\\n  min-width: 230px;\\n  width: 65%;\\n}\\n\\n.wallet .dashboard .dashboard-split-right {\\n  padding-left: 20px;\\n  flex-grow: 1;\\n  width: 35%;\\n  align-self: center;\\n}\\n\\n.wallet .dashboard .marketprice {\\n  color: green;\\n}\\n\\n.wallet .dashboard .marketprice-negative {\\n  color: red;\\n}\\n\\n.wallet .dashboard .marketprice-larger {\\n  font-size: 1.2rem;\\n}\\n\\n.wallet .dashboard .marketprice-table {\\n  width: 100%;\\n}\\n\\n@media screen and (max-width: 599px) {\\n  .wallet .dashboard .dashboard-split-card {\\n    flex-direction: column;\\n  }\\n  .wallet .dashboard .dashboard-split-left {\\n    flex-grow: 2;\\n    width: 100%;\\n  }\\n  .wallet .dashboard .dashboard-split-right {\\n    flex-grow: 1;\\n    width: 100%;\\n    align-self: center;\\n  }\\n}\"],\n    encapsulation: 2\n  });\n}","map":null,"metadata":{},"sourceType":"module"}