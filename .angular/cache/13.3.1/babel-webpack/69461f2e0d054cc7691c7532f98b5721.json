{"ast":null,"code":"import _classCallCheck from \"D:\\\\Github\\\\Miladsoft\\\\blockcore-hub-1\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"D:\\\\Github\\\\Miladsoft\\\\blockcore-hub-1\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\nimport { EventEmitter } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\n\nfunction ImageCropperComponent_span_13_span_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵelement(2, \"br\");\n    i0.ɵɵtext(3, \"\\n        Preview:\");\n    i0.ɵɵelement(4, \"br\");\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelement(6, \"img\", 7);\n    i0.ɵɵtext(7, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵstyleProp(\"border\", ctx_r1.croppedImage ? \"1px solid black\" : \"none\");\n    i0.ɵɵproperty(\"src\", ctx_r1.croppedImage, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction ImageCropperComponent_span_13_Template(rf, ctx) {\n  if (rf & 1) {\n    var _r3 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"\\n\\n    \");\n    i0.ɵɵelementStart(2, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ImageCropperComponent_span_13_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r3);\n      var ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.rotateLeft();\n    });\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"mat-icon\");\n    i0.ɵɵtext(5, \"rotate_left\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n    \");\n    i0.ɵɵelementStart(8, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ImageCropperComponent_span_13_Template_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r3);\n      var ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.rotateRight();\n    });\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementStart(10, \"mat-icon\");\n    i0.ɵɵtext(11, \"rotate_right\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n    \");\n    i0.ɵɵelementStart(14, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ImageCropperComponent_span_13_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r3);\n      var ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.flipHorizontal();\n    });\n    i0.ɵɵtext(15, \"\\n        \");\n    i0.ɵɵelementStart(16, \"mat-icon\");\n    i0.ɵɵtext(17, \"flip\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n    \");\n    i0.ɵɵelementStart(20, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ImageCropperComponent_span_13_Template_button_click_20_listener() {\n      i0.ɵɵrestoreView(_r3);\n      var ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.flipVertical();\n    });\n    i0.ɵɵtext(21, \"\\n        \");\n    i0.ɵɵelementStart(22, \"mat-icon\", 5);\n    i0.ɵɵtext(23, \"flip\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n    \");\n    i0.ɵɵelementStart(26, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function ImageCropperComponent_span_13_Template_button_click_26_listener() {\n      i0.ɵɵrestoreView(_r3);\n      var ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.resetImage();\n    });\n    i0.ɵɵtext(27, \"\\n        \");\n    i0.ɵɵelementStart(28, \"mat-icon\");\n    i0.ɵɵtext(29, \"undo\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(31, \"br\");\n    i0.ɵɵtext(32, \"\\n\\n    \");\n    i0.ɵɵelementStart(33, \"div\");\n    i0.ɵɵtext(34, \"\\n        \");\n    i0.ɵɵelementStart(35, \"image-cropper\", 6);\n    i0.ɵɵlistener(\"imageCropped\", function ImageCropperComponent_span_13_Template_image_cropper_imageCropped_35_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      var ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.imageCropped($event);\n    })(\"imageLoaded\", function ImageCropperComponent_span_13_Template_image_cropper_imageLoaded_35_listener() {\n      i0.ɵɵrestoreView(_r3);\n      var ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.imageLoaded();\n    })(\"cropperReady\", function ImageCropperComponent_span_13_Template_image_cropper_cropperReady_35_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      var ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.cropperReady($event);\n    })(\"loadImageFailed\", function ImageCropperComponent_span_13_Template_image_cropper_loadImageFailed_35_listener() {\n      i0.ɵɵrestoreView(_r3);\n      var ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.loadImageFailed();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(37, \"\\n\\n    \");\n    i0.ɵɵtemplate(38, ImageCropperComponent_span_13_span_38_Template, 8, 3, \"span\", 3);\n    i0.ɵɵtext(39, \"\\n\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    var ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(35);\n    i0.ɵɵstyleProp(\"display\", ctx_r0.showCropper ? null : \"none\");\n    i0.ɵɵproperty(\"imageChangedEvent\", ctx_r0.imageChangedEvent)(\"imageURL\", ctx_r0.imageURL)(\"maintainAspectRatio\", true)(\"containWithinAspectRatio\", ctx_r0.containWithinAspectRatio)(\"resizeToWidth\", 160)(\"cropperMinWidth\", 160)(\"onlyScaleDown\", true)(\"roundCropper\", false)(\"canvasRotation\", ctx_r0.canvasRotation)(\"transform\", ctx_r0.transform)(\"alignImage\", \"center\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.showPreview);\n  }\n}\n\nexport var ImageCropperComponent = /*#__PURE__*/(function () {\n  var ImageCropperComponent = /*#__PURE__*/function () {\n    function ImageCropperComponent(fb) {\n      _classCallCheck(this, ImageCropperComponent);\n\n      this.fb = fb;\n      this.hostClass = true;\n      this.showPreview = true;\n      this.imageUpdated = new EventEmitter();\n      this.imageChangedEvent = '';\n      this.croppedImage = '';\n      this.canvasRotation = 0;\n      this.rotation = 0;\n      this.scale = 1;\n      this.showCropper = false;\n      this.containWithinAspectRatio = false;\n      this.transform = {};\n      this.formDoc = this.fb.group({\n        basicfile: []\n      });\n    }\n\n    _createClass(ImageCropperComponent, [{\n      key: \"fileChangeEvent\",\n      value: function fileChangeEvent(event) {\n        this.imageChangedEvent = event;\n        console.log(event);\n      }\n    }, {\n      key: \"imageCropped\",\n      value: function imageCropped(event) {\n        this.croppedImage = event.base64;\n        console.log(event);\n        this.imageUpdated.emit(event);\n      }\n    }, {\n      key: \"imageLoaded\",\n      value: function imageLoaded() {\n        this.showCropper = true;\n        console.log('Image loaded');\n      }\n    }, {\n      key: \"cropperReady\",\n      value: function cropperReady(sourceImageDimensions) {\n        console.log('Cropper ready', sourceImageDimensions);\n      }\n    }, {\n      key: \"loadImageFailed\",\n      value: function loadImageFailed() {\n        console.log('Load failed');\n      }\n    }, {\n      key: \"rotateLeft\",\n      value: function rotateLeft() {\n        this.canvasRotation--;\n        this.flipAfterRotate();\n      }\n    }, {\n      key: \"rotateRight\",\n      value: function rotateRight() {\n        this.canvasRotation++;\n        this.flipAfterRotate();\n      }\n    }, {\n      key: \"flipHorizontal\",\n      value: function flipHorizontal() {\n        this.transform = Object.assign(Object.assign({}, this.transform), {\n          flipH: !this.transform.flipH\n        });\n      }\n    }, {\n      key: \"flipVertical\",\n      value: function flipVertical() {\n        this.transform = Object.assign(Object.assign({}, this.transform), {\n          flipV: !this.transform.flipV\n        });\n      }\n    }, {\n      key: \"resetImage\",\n      value: function resetImage() {\n        this.scale = 1;\n        this.rotation = 0;\n        this.canvasRotation = 0;\n        this.transform = {};\n      }\n    }, {\n      key: \"zoomOut\",\n      value: function zoomOut() {\n        this.scale -= .1;\n        this.transform = Object.assign(Object.assign({}, this.transform), {\n          scale: this.scale\n        });\n      }\n    }, {\n      key: \"zoomIn\",\n      value: function zoomIn() {\n        this.scale += .1;\n        this.transform = Object.assign(Object.assign({}, this.transform), {\n          scale: this.scale\n        });\n      }\n    }, {\n      key: \"toggleContainWithinAspectRatio\",\n      value: function toggleContainWithinAspectRatio() {\n        this.containWithinAspectRatio = !this.containWithinAspectRatio;\n      }\n    }, {\n      key: \"updateRotation\",\n      value: function updateRotation() {\n        this.transform = Object.assign(Object.assign({}, this.transform), {\n          rotate: this.rotation\n        });\n      }\n    }, {\n      key: \"flipAfterRotate\",\n      value: function flipAfterRotate() {\n        var flippedH = this.transform.flipH;\n        var flippedV = this.transform.flipV;\n        this.transform = Object.assign(Object.assign({}, this.transform), {\n          flipH: flippedV,\n          flipV: flippedH\n        });\n      }\n    }]);\n\n    return ImageCropperComponent;\n  }();\n\n  /** @nocollapse */\n  ImageCropperComponent.ɵfac = function ImageCropperComponent_Factory(t) {\n    return new (t || ImageCropperComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n  };\n  /** @nocollapse */\n\n\n  ImageCropperComponent.ɵcmp =\n  /** @pureOrBreakMyCode */\n  i0.ɵɵdefineComponent({\n    type: ImageCropperComponent,\n    selectors: [[\"app-image-cropper\"]],\n    hostVars: 2,\n    hostBindings: function ImageCropperComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        i0.ɵɵclassProp(\"image-cropper\", ctx.hostClass);\n      }\n    },\n    inputs: {\n      showPreview: \"showPreview\"\n    },\n    outputs: {\n      imageUpdated: \"imageUpdated\"\n    },\n    decls: 15,\n    vars: 2,\n    consts: [[\"appearance\", \"outline\", 3, \"formGroup\"], [\"formControlName\", \"basicfile\", \"placeholder\", \"Profile image\", 3, \"change\"], [\"matSuffix\", \"\"], [4, \"ngIf\"], [\"mat-icon-button\", \"\", 3, \"click\"], [1, \"rotate-90\"], [\"backgroundColor\", \"black\", \"format\", \"png\", 3, \"imageChangedEvent\", \"imageURL\", \"maintainAspectRatio\", \"containWithinAspectRatio\", \"resizeToWidth\", \"cropperMinWidth\", \"onlyScaleDown\", \"roundCropper\", \"canvasRotation\", \"transform\", \"alignImage\", \"imageCropped\", \"imageLoaded\", \"cropperReady\", \"loadImageFailed\"], [3, \"src\"]],\n    template: function ImageCropperComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtext(0, \"\\n\");\n        i0.ɵɵelementStart(1, \"mat-form-field\", 0);\n        i0.ɵɵtext(2, \"\\n    \");\n        i0.ɵɵelementStart(3, \"mat-label\");\n        i0.ɵɵtext(4, \"Change profile image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(5, \"\\n    \");\n        i0.ɵɵelementStart(6, \"ngx-mat-file-input\", 1);\n        i0.ɵɵlistener(\"change\", function ImageCropperComponent_Template_ngx_mat_file_input_change_6_listener($event) {\n          return ctx.fileChangeEvent($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(7, \"\\n    \");\n        i0.ɵɵelementStart(8, \"mat-icon\", 2);\n        i0.ɵɵtext(9, \"image\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(10, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(11, \"\\n\\n\");\n        i0.ɵɵtext(12, \"\\n\\n\");\n        i0.ɵɵtemplate(13, ImageCropperComponent_span_13_Template, 40, 14, \"span\", 3);\n        i0.ɵɵtext(14, \"\\n\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.formDoc);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngIf\", ctx.imageChangedEvent);\n      }\n    },\n    styles: [\"image-cropper {\\n  max-height: 33vh;\\n}\\n\\n.image-cropper {\\n  max-height: 33vh;\\n}\\n\\n.image-cropper .rotate-45 {\\n  transform: rotate(45deg);\\n}\\n\\n.image-cropper .rotate-90 {\\n  transform: rotate(90deg);\\n}\\n\\n.image-cropper .icon-flipped {\\n  transform: scaleX(-1);\\n}\"],\n    encapsulation: 2\n  });\n  return ImageCropperComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}